# 股票即時監控桌面應用程式

## 📋 專案概述

建立一個基於 Tkinter 的台灣股市即時監控桌面應用程式，提供股票資訊自動更新、多股票追蹤、搜尋與管理功能。

---

## 🛠️ 技術棧

- **爬蟲框架**: crawl4ai 0.7.7
- **GUI 框架**: tkinter
- **股票代碼**: twstock (台灣股票代碼資料庫)
- **異步處理**: asyncio
- **開發環境**: uv (Python 套件管理工具)

---

## 📝 功能需求

### 核心功能

1. **爬蟲實作**
   - 參考 `lesson8_1_3.py` 的爬蟲邏輯
   - 使用 crawl4ai AsyncWebCrawler 進行異步爬取
   - 實作動態內容等待機制（wait_for）
   - 支援批次並行爬取多支股票

2. **自動更新機制**
   - 每隔 1 分鐘自動更新一次股票資料
   - 顯示最後更新時間戳記
   - 提供手動立即更新按鈕

3. **使用者介面佈局**

   **左側面板（股票選擇區）**
   - 顯示可選擇的台灣股票清單（使用 twstock 套件）
   - 提供股票代碼與名稱對照
   - 支援使用者選取並加入觀察清單
   - 股票搜尋功能（可依代碼或名稱搜尋）

   **右側面板（資料顯示區）**
   - 顯示觀察中的股票即時資訊：
     - 股票代碼與名稱
     - 即時價格
     - 漲跌幅度與百分比
     - 開盤價、最高價、最低價
     - 成交量
     - 前一日收盤價
     - 更新時間
   - 每支股票旁提供「移除」按鈕
   - 支援多支股票同時顯示

4. **互動功能**
   - ✅ 加入觀察清單
   - ❌ 移除觀察清單
   - 🔄 手動立即更新
   - 🔍 股票代碼/名稱搜尋

---

## 📂 專案結構

```
lesson8_1/
├── main.py              # 主程式入口（Tkinter 應用程式）
├── lesson8_1_3.py       # 爬蟲參考實作
└── plan.md              # 專案規劃文件
```

---

## 🔧 實作細節

### 技術要點

1. **異步爬蟲整合 Tkinter**
   - 使用 `asyncio` 與 `threading` 避免 UI 阻塞
   - 在背景執行緒中執行爬蟲任務
   - 使用 `queue` 或 callback 回傳結果到主執行緒

2. **定時器實作**
   - 使用 `tkinter.after()` 實作每分鐘自動更新
   - 可暫停/恢復自動更新功能

3. **資料管理**
   - 維護一個觀察清單（List 或 Set）
   - 儲存最後更新時間
   - 可考慮加入持久化（JSON 檔案儲存觀察清單）

4. **錯誤處理**
   - 網路連線失敗處理
   - 個別股票爬取失敗不影響其他股票
   - 使用者友善的錯誤訊息顯示

---

## 🚀 開發環境

- **工作路徑**: `./lesson8_1/main.py`
- **虛擬環境**: 使用專案根目錄的 uv 開發環境
- **啟動方式**:
  ```bash
  cd /Users/roberthsu2003/Documents/GitHub/2025_11_01_tvdi_python_crawel
  source .venv/bin/activate
  cd lesson8_1
  python main.py
  ```

---

## 📌 注意事項

1. 遵守目標網站的 robots.txt 與使用條款
2. 合理設定爬取頻率，避免對伺服器造成負擔
3. 處理市場開盤/收盤時間的資料更新邏輯
4. 確保 UI 介面響應流暢，不因爬蟲阻塞