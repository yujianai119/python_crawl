# 股票即時監控桌面應用程式 - 開發任務清單

**專案路徑**: `./lesson8_1/main.py`  
**開始日期**: 2025年12月20日  
**狀態**: 🟡 進行中

---

## ✅ Phase 1: 環境設定與基礎架構

- [ ] 1.1 確認開發環境（uv、crawl4ai 0.7.7、tkinter）
- [ ] 1.2 安裝 twstock 套件並測試股票代碼獲取
- [ ] 1.3 建立專案檔案結構（main.py）
- [ ] 1.4 從 lesson8_1_3.py 提取爬蟲核心函數

**預估時間**: 1 小時  
**完成日期**: ___________

---

## ✅ Phase 2: 爬蟲模組開發

- [ ] 2.1 實作 `get_stock_schema()` - 股票資訊提取規則
- [ ] 2.2 實作 `fetch_stock_info()` - 單支股票異步爬取
  - [ ] 加入 wait_for 動態內容等待
  - [ ] 設定合理的 timeout 參數
  - [ ] 實作錯誤處理與重試機制
- [ ] 2.3 實作 `fetch_multiple_stocks()` - 批次並行爬取
  - [ ] 使用 asyncio.gather() 並行處理
  - [ ] 使用 Semaphore 限制並行數量
- [ ] 2.4 實作 asyncio 與 threading 整合邏輯
  - [ ] 建立背景執行緒執行爬蟲
  - [ ] 使用 queue 傳遞結果到主執行緒

**預估時間**: 3 小時  
**完成日期**: ___________

---

## ✅ Phase 3: Tkinter GUI 基礎

- [ ] 3.1 建立主視窗（StockMonitorApp 類別）
- [ ] 3.2 設計視窗佈局（左右分割式面板）
  - [ ] 使用 PanedWindow 或 Frame 分割左右區域
- [ ] 3.3 設定視窗基本屬性（標題、大小、圖示）
- [ ] 3.4 實作視窗關閉事件處理（清理資源）

**預估時間**: 2 小時  
**完成日期**: ___________

---

## ✅ Phase 4: 左側面板 - 股票選擇區

- [ ] 4.1 整合 twstock 獲取台灣股票清單
- [ ] 4.2 建立股票清單顯示元件（Listbox 或 Treeview）
  - [ ] 顯示格式：代碼 - 股票名稱
- [ ] 4.3 實作股票搜尋功能
  - [ ] 搜尋輸入框（Entry）
  - [ ] 即時過濾搜尋結果
  - [ ] 支援代碼或名稱模糊搜尋
- [ ] 4.4 實作「加入觀察」按鈕
  - [ ] 雙擊或按鈕加入
  - [ ] 防止重複加入
  - [ ] 顯示加入成功提示

**預估時間**: 3 小時  
**完成日期**: ___________

---

## ✅ Phase 5: 右側面板 - 資料顯示區

- [ ] 5.1 設計股票資訊卡片 UI
  - [ ] 使用 Frame 或 LabelFrame 分隔每支股票
  - [ ] 使用 Grid 或 Pack 佈局資訊欄位
- [ ] 5.2 實作股票資訊欄位顯示
  - [ ] 股票代碼與名稱（標題）
  - [ ] 即時價格（大字體、顏色標示漲跌）
  - [ ] 漲跌幅度與百分比（紅綠色標示）
  - [ ] 開盤價、最高價、最低價
  - [ ] 成交量、前一日收盤價
  - [ ] 更新時間戳記
- [ ] 5.3 實作「移除」按鈕（每支股票旁）
  - [ ] 從觀察清單移除
  - [ ] 更新 UI 顯示
- [ ] 5.4 實作滾動條（支援多支股票顯示）
- [ ] 5.5 實作空狀態提示（無觀察股票時）

**預估時間**: 4 小時  
**完成日期**: ___________

---

## ✅ Phase 6: 自動更新機制

- [ ] 6.1 實作手動更新按鈕
  - [ ] 按鈕 UI 設計（工具列或頂部）
  - [ ] 綁定更新函數
  - [ ] 更新時顯示 Loading 狀態
- [ ] 6.2 實作自動更新定時器
  - [ ] 使用 tkinter.after() 每 60 秒觸發
  - [ ] 可暫停/恢復功能（開關按鈕）
- [ ] 6.3 實作更新邏輯
  - [ ] 在背景執行緒中執行爬蟲
  - [ ] 爬取完成後更新 GUI
  - [ ] 更新最後更新時間顯示
- [ ] 6.4 實作進度指示器
  - [ ] 顯示爬取進度（n/total）
  - [ ] ProgressBar 或狀態文字

**預估時間**: 3 小時  
**完成日期**: ___________

---

## ✅ Phase 7: 資料管理與持久化

- [ ] 7.1 實作觀察清單管理
  - [ ] 使用 List 或 Set 儲存觀察中的股票代碼
- [ ] 7.2 實作觀察清單持久化（選用）
  - [ ] 儲存到 JSON 檔案
  - [ ] 啟動時自動載入上次的觀察清單
- [ ] 7.3 實作快取機制（選用）
  - [ ] 避免短時間內重複爬取

**預估時間**: 2 小時  
**完成日期**: ___________

---

## ✅ Phase 8: 錯誤處理與使用者體驗

- [ ] 8.1 實作網路錯誤處理
  - [ ] 連線失敗時顯示友善訊息
  - [ ] 個別股票失敗不影響其他股票
- [ ] 8.2 實作 UI 反應式設計
  - [ ] 爬取時禁用更新按鈕（防止重複點擊）
  - [ ] 顯示 Loading 動畫或文字
- [ ] 8.3 實作資料驗證
  - [ ] 檢查爬取資料完整性
  - [ ] 處理缺失或異常資料
- [ ] 8.4 實作日誌記錄
  - [ ] 記錄爬取錯誤和異常
  - [ ] 可選擇性顯示日誌視窗

**預估時間**: 2 小時  
**完成日期**: ___________

---

## ✅ Phase 9: 測試與優化

- [ ] 9.1 功能測試
  - [ ] 測試加入/移除股票
  - [ ] 測試搜尋功能
  - [ ] 測試手動/自動更新
  - [ ] 測試錯誤處理
- [ ] 9.2 效能測試
  - [ ] 測試多支股票並行爬取效能
  - [ ] 測試 UI 響應速度
  - [ ] 優化記憶體使用
- [ ] 9.3 使用者體驗優化
  - [ ] 調整 UI 配色與字體大小
  - [ ] 加入快捷鍵支援
  - [ ] 加入工具提示（Tooltip）
- [ ] 9.4 程式碼重構與文檔
  - [ ] 加入 docstrings
  - [ ] 遵循 PEP 8 規範
  - [ ] 建立 README 使用說明

**預估時間**: 3 小時  
**完成日期**: ___________

---

## ✅ Phase 10: 進階功能（選用）

- [ ] 10.1 加入股票資料圖表顯示（matplotlib）
- [ ] 10.2 實作股票提醒功能（價格達到特定條件時提醒）
- [ ] 10.3 實作匯出功能（CSV、Excel）
- [ ] 10.4 實作深色模式切換
- [ ] 10.5 加入系統托盤圖示（最小化到系統列）

**預估時間**: 5+ 小時（選用）  
**完成日期**: ___________

---

## 📊 整體進度追蹤

| Phase | 任務數 | 完成數 | 進度 | 狀態 |
|-------|--------|--------|------|------|
| Phase 1: 環境設定 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 2: 爬蟲模組 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 3: GUI 基礎 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 4: 左側面板 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 5: 右側面板 | 5 | 0 | 0% | ⬜ 未開始 |
| Phase 6: 自動更新 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 7: 資料管理 | 3 | 0 | 0% | ⬜ 未開始 |
| Phase 8: 錯誤處理 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 9: 測試優化 | 4 | 0 | 0% | ⬜ 未開始 |
| Phase 10: 進階功能 | 5 | 0 | 0% | 🟦 選用 |
| **總計** | **41** | **0** | **0%** | **⬜** |

**預估總時間**: 23-28 小時  
**實際花費**: _______ 小時

---

## 📝 開發筆記

### 2025年12月20日
- 專案啟動，建立任務清單

### 遇到的問題與解決方案
- _記錄開發過程中遇到的問題和解決方法_

---

## 🎯 里程碑

- [ ] **Milestone 1**: 完成環境設定與爬蟲模組 (Phase 1-2)
- [ ] **Milestone 2**: 完成 GUI 基礎架構 (Phase 3)
- [ ] **Milestone 3**: 完成左右面板 UI (Phase 4-5)
- [ ] **Milestone 4**: 完成更新機制 (Phase 6)
- [ ] **Milestone 5**: 完成資料管理與錯誤處理 (Phase 7-8)
- [ ] **Milestone 6**: 測試與優化完成 (Phase 9)
- [ ] **Milestone 7**: 發布 v1.0

---

## 📌 參考資料

- 爬蟲實作參考: `lesson8_1_3.py`
- crawl4ai 文檔: https://crawl4ai.com
- tkinter 文檔: https://docs.python.org/3/library/tkinter.html
- twstock 文檔: https://twstock.readthedocs.io/